@using WebApp.Library.Extensions
@using Orvosi.Shared.Enums
@using WebApp.ViewModels.ServiceRequestTaskViewModels
@{
    Layout = "~/Views/Dashboard/_Layout.cshtml";
}

@Html.Action("Additionals", "ServiceRequest")

@Html.Partial("ModalContainer")

@section Scripts {

    <script>

        function tasklistChanged(serviceRequestId) {
            let url = '@Url.Content("~/ServiceRequestTask/TaskList")';

            $.get(url, {
                serviceRequestId: serviceRequestId,
                viewOptions: '@TaskListViewOptions.Dashboard',
                options: '@TaskListViewModelFilter.CriticalPathOrAssignedToUser'
            })
            .done(function (result) {
                document.getElementById('tasklist-container-' + serviceRequestId).innerHTML = result;
            })
            .always(function () {
                //loader.hide();
            });
        }

    </script>

    @Html.Partial("~/Views/ServiceRequest/CaseJS.cshtml")
    @Html.Partial("~/Views/ServiceRequestTask/TaskListJS.cshtml")
}
