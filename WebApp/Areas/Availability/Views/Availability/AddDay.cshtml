@model AddDayFormModel



<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <div class="modal-title">
        <h4>Add Availability</h4>
        <small>for @Model.ViewData.Physician.Name</small>
    </div>
</div>
<div class="modal-body">
    <form id="availableday-new-form">

        @Html.Hidden("PhysicianId", Model.PhysicianId)

        <div class="form-group">
            <div>
                <div class="alert alert-info">
                    <strong>Tip:</strong><br />You can select multiple days at once
                </div>
                <div>
                    <div id="availableday-datepicker"></div>
                    <input type="hidden" id="AvailableDays" name="AvailableDays">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label">Location</label>
            <div>
                @Html.DropDownList("LocationId", new SelectList(Model.ViewData.Addresses, "Value", "Text", "Group.Name", new { }), string.Empty, new { @class = "form-control" })
                @Html.ValidationMessage("LocationId", "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label">Company</label>
            <div>
                @Html.DropDownList("CompanyId", new SelectList(Model.ViewData.Companies, "Value", "Text", "Group.Name", new { }), string.Empty, new { @class = "form-control" })
                @Html.ValidationMessage("CompanyId", "", new { @class = "text-danger" })
            </div>
        </div>

    </form>

</div>
<div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    <button class="btn btn-success" onclick="saveAddDayForm($('#availableday-new-form'), false)">Save</button>
</div>

<script type="text/javascript">

    let availableDays = [@Model.ViewData.AvailableDaysCSV];
    $('#availableday-datepicker').datepicker({
        startDate: '@Model.ViewData.SelectedMonth',
        endDate: '@Model.ViewData.LastDayOfMonth',
        format: 'yyyy-mm-dd',
        multidate: true,
        datesDisabled: [@Model.ViewData.AvailableDaysCSV]
    });
    $('#availableday-datepicker').on('changeDate', function () {
        let date = $('#availableday-datepicker').datepicker('getFormattedDate');
        $('#AvailableDays').val(date);
    });

</script>

@section Scripts {

    @Scripts.Render("~/bundles/jqueryval")
}