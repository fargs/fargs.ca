
<script type="text/javascript">


    function showTeleconferenceForm(serviceRequestId, teleconferenceId, teleconferenceTypeId) {
        var url = '@Url.Content("~/Teleconference/ShowTeleconferenceForm")';

        $.get(url, {
            serviceRequestId: serviceRequestId,
            teleconferenceTypeId: teleconferenceTypeId,
            teleconferenceId: teleconferenceId,
        }).done(function (result) {
            $('#modal-content').html(result);
            $('#modal-container').modal('toggle');
        });
    }

    function saveTeleconference(form, notify) {

        var url = '@Url.Content("~/Teleconference/SaveTeleconference")';
        var notifyUrl = '@Url.Content("~/Teleconference/NotifyTeam")';

        $.post(url,
            form.serialize()
        ).done(function (data) {
            $('#modal-container').modal('toggle');
            toastr.success("Saved successfully.");
            teleconferencesChanged(data.serviceRequestId);
        }).error(function (result) {
            $('#modal-content').html(result.responseText);
        });
    }

    function showTeleconferenceResultForm(serviceRequestId, teleconferenceId) {
        var url = '@Url.Content("~/Teleconference/ShowTeleconferenceResultForm")';

        $.get(url, {
            teleconferenceId: teleconferenceId,
        }).done(function (result) {
            $('#modal-content').html(result);
            $('#modal-container').modal('toggle');
        });
    }

    function saveTeleconferenceResultForm(teleconferenceId, serviceRequestId) {
        let url = '@Url.Content("~/Teleconference/SendResult")';
        let form = $('#edit-teleconference-message-form');
        let formData = new FormData(form[0]);
        $.ajax({
            url: url,
            type: 'POST',
            data: formData,
            async: false,
            cache: false,
            contentType: false,
            processData: false,
            success: function () {
                toastr.success("Teleconference result sent successfully");
                $('#modal-container').modal('toggle');
                teleconferencesChanged(serviceRequestId);
            }
        });
    }

    function getTeleconferenceNotificationTemplate(resultTypeId, serviceRequestId) {
        var url = '@Url.Content("~/Teleconference/GetNotificationTemplate")';

        $.get(url, {
            resultTypeId: resultTypeId,
            serviceRequestId: serviceRequestId
        }).done(function (result) {
            $('#teleconference-message-body').val(result);
        });
    }

    function showDeleteTeleconferenceForm(teleconferenceId) {
        var url = '@Url.Content("~/Teleconference/ShowDeleteTeleconferenceForm")';

        $.get(url, {
            teleconferenceId: teleconferenceId
        }).done(function (result) {
            $('#modal-content').html(result);
            $('#modal-container').modal('toggle');
        });
    }

    function deleteTeleconference(teleconferenceId) {

        var url = '@Url.Content("~/Teleconference/DeleteTeleconference")';

        $.post(url,
            { teleconferenceId: teleconferenceId }
        ).done(function (data) {
            $('#modal-container').modal('toggle');
            toastr.success("Deleted successfully.");
            teleconferencesChanged(data.serviceRequestId);
        }).error(function (result) {
            $('#modal-content').html(result.responseText);
        });
    };

    function teleconferencesChanged(serviceRequestId) {

    }

</script>
